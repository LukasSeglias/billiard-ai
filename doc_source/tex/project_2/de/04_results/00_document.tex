\chapter{Resultate}\label{kap:resultate}
Das Kapitel beinhaltet die Beschreibung der Genauigkeiten der Messresultate wie auch der Kugeldetektion.

\section{Detektionsgenauigkeit}
Ein Mass für die Genauigkeit der Detektion bildet die absolute Differenz zwischen der erwarteten wie auch der
effektiv detektierten Anzahl der Kugeln. Hierbei werden die Positionen nicht berücksichtigt, die Erkennungsgenauigkeit dieser
wird im Kapitel \ref{kap:uebersetzungsgenauigkeit} beschrieben und millimetergenau bestimmt.
Dazu wurden diverse Testbilder\footnote{Alle Testbilder sind im Anhang \ref{anhang:detektionsgenauigkeit:testbilder} ersichtlich} aufgenommen.

\begin{table}[ht]
    \begin{center}
        \rowcolors{1}{\seccolor!10}{\seccolor!10} % Rows with 10% of secondary color
        \begin{tabular}{llll}
            \rowcolor{\seccolor!50}
            Bild & Anzahl erwartete Kugeln & Anzahl detektierte Kugeln & Absoluter Fehler\\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:1} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:2} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:3} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:4} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:5} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:6} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:7} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:8} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:9} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:10} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:11} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:12} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:13} & 20 & 20 & 20 - 20 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:14} & 22 & 22 & 22 - 22 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:15} & 22 & 22 & 22 - 22 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:16} & 22 & 22 & 22 - 22 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:17} & 21 & 21 & 21 - 21 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:18} & 18 & 18 & 18 - 18 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:19} & 19 & 19 & 19 - 19 = 0 \\\bfhmidline
            \ref{fig:detektionsgenauigkeit:testbild:20} & 17 & 17 & 17 - 17 = 0 \\\bfhmidline
        \end{tabular}
    \end{center}
    \caption{Detektionsgenauigkeit}
    \label{tab:resultate:detektionsgenauigkeit}
\end{table}
Der durchschnittliche Fehler beträgt: 0 [Kugeln]

\section{Übersetzungsgenauigkeit der erkannten Kugeln}\label{kap:uebersetzungsgenauigkeit}
Es gilt zwei Aspekte zu beachten. Einerseits soll die Genauigkeit der Übersetzung von Pixel- zu Modellkoordinatensystem,
andererseits auch die Genauigkeit der Detektion eines Kugelmittelpunkts bestimmt werden.
Um Letzeres zu erreichen, muss Ersteres bekannt sein. Ist bekannt, welcher Fehler bei der Übersetzung geschieht, kann
erkannt werden, wie gross der Fehlerbeitrag der Detektion des Kugelmittelpunkts ist. Dies ist wichtig, um bei
grösseren Abweichungen von der erwarteten Fehlertoleranz am richtigen Ort anzusetzen. Die Gesamttoleranz der beiden
möglichen Fehlerquellen liegt bei 3mm\footnote{Für die Auswirkung des Fehlerradius siehe Anhang \ref{anhang:fehler}}. Diese Fehlertoleranz $F(x,y)$ beschreibt einen Radius um den erwarteten Kugelmittelpunkt.
Der Radius setzt sich aus dem Fehler in X- wie auch in Y-Richtung zusammen. Er wird also wie in Gleichung \ref{eq:1} beschrieben.
\begin{align}
    F(x,y) = \sqrt{x^2 + y^2} | F(x,y) \leq 2\label{eq:1}
\end{align}
Zusätzlich muss noch der Fehler des Messgeräts berücksichtigt werden, welcher mit $\pm 1.5mm$ angegeben wird. Da dieser
Fehler sowohl in X- wie auch Y-Richtung vorkommen kann, liegt der maximale Messfehler bei $\sqrt{1.5^2 + 1.5^2} = 2.12mm$. Somit liegt
der Gesamtfehlerradius bei $5.12mm$, wobei allfällige Messfehler von Hand nicht berücksichtigt werden. Wichtig zu beachten ist
ebenfalls, dass der Kugelmittelpunkt von der Core-Library subpixelgenau bestimmt wird. Die Grundwahrheit wiederum wird in
ganzen Pixel angegeben. So kommt eine weitere Abweichung dazu, welche maximal $0.983$ mm beträgt\footnote{Für Herleitung siehe Anhang \ref{anhang:fehler:grundwahrheit}},
sollte das erkannte Subpixel zum Grundwahrheitspixel gehören.
Diese Abweichung ist nun aber kein Fehler der Detektion, sondern der Grundwarheit an sich. Der Fehler könnte also um diesen
Maximalwert reduziert werden. Darauf wird aber im Folgenden verzichtet, da lediglich der Worst-Case betrachtet wird. Es wird
also angenommen, dass die Grundwahrheit genauer ist, als die Detektion.

Um die Genauigkeit zu messen, wurden mehrere Testbilder\footnote{Alle Testbilder sind im Anhang \ref{anhang:uebersetzungsgenauigkeit:testbilder} ersichtlich}
erstellt. Auf diesen ist jeweils eine Kugel ersichtlich, von der
wie in Kapitel \ref{kap:measurements} beschrieben die Modellkoordinate bestimmt wird. Diese Messung dient als Wahrheit zur
Verifikation der Berechnungen.

In einem ersten Schritt muss also die Genauigkeit der Umrechung der Koordinatensysteme bestimmt werden. Dazu wird
manuell der erwartete Kugelmittelpunkt in Pixelkoordinaten pro Testbild bestimmt. Dieser Punkt wird anschliessend
umgerechnet und es wird der absolute Fehlerwert in Millimeter angegeben.

\begin{table}[ht]
    \begin{center}
        \rowcolors{1}{\seccolor!10}{\seccolor!10} % Rows with 10% of secondary color
        \begin{tabular}{lllll}
            \rowcolor{\seccolor!50}
            Bild & Pixelkoordinaten & Erwartete Modellkoordinaten & Detektierte Modellkoordinaten & Absoluter Fehler\\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:1} & [629, 743] & [-374.85, -216.15] & [-373.634, -215.162]  & [1.21591, 0.987723], 1.56653mm \\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:2} & [814, 287] & [-180.85, 283.15] & [-177.976, 282.742]  & [2.87359, -0.408301], 2.90245mm \\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:3} & [1273, 413] & [337.85, 142.15] & [335.588, 141.849]  & [-2.26196, -0.301047], 2.2819mm \\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:4} & [1561, 621] & [664.15, -91.85] & [661.33, -94.6072]  & [-2.81992, -2.75725], 3.9439mm \\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:5} & [475, 639] & [-560.85, -112.85] & [-559.861, -112.638]  & [0.988977, 0.211893], 1.01142mm \\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:6} & [980, 537] & [5.85, 0.15] & [7.47888, 0.241278]  & [1.62888, 0.0912778], 1.63144mm \\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:7} & [1640, 225] & [751.15, 350.15] & [752.38, 351.407]  & [1.22988, 1.25668], 1.75837mm \\\bfhmidline
        \end{tabular}
    \end{center}
    \caption{Messresultate Koordinatensystem}
    \label{tab:messresultate:koordinatensystem}
\end{table}
Der durchschnittliche Messfehler beträgt: 2.1565 [mm]\\

In einem zweiten Schritt wird nun noch die Detektion der Kugeln miteinbezogen. Es wird also nicht mehr manuell
der Kugelmittelpunkt bestimmt, dies übernimmt nun ebenfalls die Core-Library. Der Fehler wird nun nochmals gleich
berechnet wie bei Tabelle \ref{tab:messresultate:koordinatensystem} unter Verwendung derselben Testbilder
(siehe Tabelle \ref{tab:messresultate:detektion}, Spalte \glqq Gesamter absoluter Fehler\grqq). Abschliessend
kann der Fehler der Detektion in Millimeter über die absolute Differenz des Fehlerwerts ohne Detektion und des
Fehlerwerts mit Detektion bestimmt werden (siehe Tabelle \ref{tab:messresultate:detektion}, Spalte \glqq Absoluter Fehler Detektion\grqq).

\begin{table}[ht]
    \begin{center}
        \rowcolors{1}{\seccolor!10}{\seccolor!10} % Rows with 10% of secondary color
        \begin{tabular}{lllll}
            \rowcolor{\seccolor!50}
            Bild & Erwartete Modellkoordinaten & Detektierte Modellkoordinaten & Gesamter absoluter Fehler & Absoluter Fehler Detektion\\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:1} & [-374.85, -216.15] & [-373.634, -215.162]  & [1.21591, 0.987723], 1.56653mm \\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:2} & [-180.85, 283.15] & [-177.976, 282.742]  & [2.87359, -0.408301], 2.90245mm \\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:3} & [337.85, 142.15] & [335.588, 141.849]  & [-2.26196, -0.301047], 2.2819mm \\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:4} & [664.15, -91.85] & [661.33, -94.6072]  & [-2.81992, -2.75725], 3.9439mm \\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:5} & [-560.85, -112.85] & [-559.861, -112.638]  & [0.988977, 0.211893], 1.01142mm \\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:6} & [5.85, 0.15] & [7.47888, 0.241278]  & [1.62888, 0.0912778], 1.63144mm \\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:7} & [751.15, 350.15] & [752.38, 351.407]  & [1.22988, 1.25668], 1.75837mm \\\bfhmidline
        \end{tabular}
    \end{center}
    \caption{Messresultate Koordinatensystem}
    \label{tab:messresultate:koordinatensystem}
\end{table}
Der durchschnittliche Fehler der Detektion beträgt: ? [mm]\\
Der durchschnittliche Gesamtmessfehler beträgt: 2.1565 [mm]\\

\begin{table}[ht]
    \begin{center}
        \rowcolors{1}{\seccolor!10}{\seccolor!10} % Rows with 10% of secondary color
        \begin{tabular}{lllll}
            \rowcolor{\seccolor!50}
            Bild & Erwartete Modellkoordinaten & Detektierte Modellkoordinaten & Gesamter absoluter Fehler & Absoluter Fehler Detektion\\\bfhmidline
            \ref{fig:uebersetzungsgenauigkeit:testbild:1} & [13, 13] & [9, 9] & [4, 4], 5.65mm & 5.65mm - 4.24mm = 1.41mm\\\bfhmidline
        \end{tabular}
    \end{center}
    \caption{Messresultate Detektion}
    \label{tab:messresultate:detektion}
\end{table}
Der durchschnittliche Fehler der Detektion beträgt: ? [mm]\\
Der durchschnittliche Gesamtmessfehler beträgt: ? [mm]
